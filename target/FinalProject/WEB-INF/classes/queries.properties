answer.create = INSERT INTO answer (text, is_correct, id_question) VALUES (?, ?, ?)
answer.find.all = SELECT * FROM answer
question.create = INSERT INTO question (text, id_quiz) VALUES (?, ?)
question.find.all = SELECT * FROM answer JOIN question USING(id_question)
quiz.create = INSERT INTO quiz (name) VALUES (?)
quiz.result.create = INSERT INTO user_answer (id_user, id_answer) VALUES (?, ?)
quiz.find.all = SELECT * FROM quiz
quiz.find.all.passed = SELECT DISTINCT id_quiz, quiz.name FROM quiz JOIN question USING(id_quiz) JOIN answer USING(id_question) JOIN user_answer USING(id_answer) WHERE id_user = ?
quiz.find.all.available = SELECT id_quiz, quiz.name FROM quiz WHERE id_quiz NOT IN (SELECT DISTINCT id_quiz FROM question JOIN answer USING(id_question) JOIN user_answer USING(id_answer) WHERE id_user = ?)
quiz.find.by.id = SELECT * FROM quiz JOIN question USING(id_quiz) JOIN answer USING(id_question) WHERE id_quiz = ?
quiz.find.student.result = SELECT id_quiz, quiz.name, id_question, question.text, id_answer, answer.text, answer.is_correct FROM user_answer JOIN answer USING(id_answer) JOIN question USING(id_question) JOIN quiz USING(id_quiz) WHERE id_user = ? AND id_quiz = ?
progress.find.all = SELECT id_user, email, role, password_hash, first_name, last_name, patronymic, id_quiz, quiz.name, (SELECT COUNT(id_question) question WHERE id_quiz = que.id_quiz) AS question_count, SUM(ans.is_correct) AS correct_count FROM final_project.user AS usr JOIN user_answer AS usr_ans USING(id_user) JOIN answer AS ans USING(id_answer) JOIN question AS que USING(id_question) JOIN quiz USING(id_quiz) GROUP BY id_user, id_quiz
progress.find.by.student = SELECT id_user, email, role, password_hash, first_name, last_name, patronymic, id_quiz, quiz.name, (SELECT COUNT(id_question) question WHERE id_quiz = que.id_quiz) AS question_count, SUM(ans.is_correct) AS correct_count FROM final_project.user AS usr JOIN user_answer AS usr_ans USING(id_user) JOIN answer AS ans USING(id_answer) JOIN question AS que USING(id_question) JOIN quiz USING(id_quiz) WHERE id_user = ? GROUP BY id_user, id_quiz
topic.create = INSERT INTO topic (name) VALUES (?)
topic.find.all = SELECT * FROM topic
topic.find.by.id = SELECT * FROM topic JOIN quiz_topic USING(id_topic) JOIN quiz USING(id_quiz) WHERE id_topic = ?
user.create = INSERT INTO final_project.user (email, password_hash, first_name, last_name, patronymic) VALUES (?, ?, ?, ?, ?)
user.find.by.email = SELECT * FROM final_project.user WHERE email = ?
user.find.students = SELECT * FROM final_project.user WHERE role = 'STUDENT'
user.find.student.by.id = SELECT * FROM final_project.user WHERE id_user = ? AND role = 'STUDENT'
